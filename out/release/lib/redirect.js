// Generated by CoffeeScript 1.6.3
var Redirect, os, parse, path, url;

os = require("options-stream");

url = require('url');

path = require('path');

parse = url.parse;

Redirect = (function() {
  function Redirect(options) {
    this.options = os({
      url: void 0
    }, options);
    if (this.options.url) {
      this.url = this.options.url;
      if (this.url[this.url.length - 1] === '/') {
        this.url = this.url.substr(0, this.url.length - 1);
      }
      if (this.url.indexOf('http://') < 0) {
        this.url = "http://{url}";
      }
    }
    this;
  }

  Redirect.prototype.middleware = function() {
    var _this = this;
    return function(req, res, next) {
      var redirectURL;
      redirectURL = "" + _this.url + req.url;
      res.statusCode = 302;
      res.setHeader('Location', redirectURL);
      return res.end();
    };
  };

  return Redirect;

})();

module.exports = function(options) {
  return new Redirect(options);
};
